<_templates Include="trucks">
	<Wheel>
		<TrailerWheel
			ConnectedToHandbrake="true"
			SuspensionHeight="0"
			SuspensionStrength="0.1"
			Torque="default"
			Type="semitrailer_foldable_log"
			SuspensionMin="-0.1"
		/>
	</Wheel>
</_templates>
<Truck Type="Trailer" AttachType="Saddle">
	<TruckData>
		<Wheels>
			<Wheel _template="TrailerWheel" Pos="(-3.785; 0.706; 0.933)" ParentFrame="BoneLogsTail_cdt" />
			<Wheel _template="TrailerWheel" Pos="(-2.535; 0.706; 0.933)" ParentFrame="BoneLogsTail_cdt" />
			<Wheel _template="TrailerWheel" Pos="(-1.285; 0.706; 0.933)" ParentFrame="BoneLogsTail_cdt" />
			<Wheel _template="TrailerWheel" RightSide="true" Pos="(-3.785; 0.706; 0.933)" ParentFrame="BoneLogsTail_cdt" />
			<Wheel _template="TrailerWheel" RightSide="true" Pos="(-2.535; 0.706; 0.933)" ParentFrame="BoneLogsTail_cdt" />
			<Wheel _template="TrailerWheel" RightSide="true" Pos="(-1.285; 0.706; 0.933)" ParentFrame="BoneLogsTail_cdt" />
		</Wheels>
		<OcclusionMap
			HalfSizeZ="1.500"
			Texture="trucks/occlusion/chassis_trailer__s_d_a.tga"
			MinX="-5.000"
			MaxX="5.500"
		/>
		<Foot Origin="(1.286; -0.234; 0.701)" />
		<Foot Origin="(1.286; -0.234; -0.701)" />
		<Constraint _template="TrailerRagdoll"
				PlaneAxisLocal="(0; 0; 1)"
				TwistAxisLocal="(1; 0; 0)"
				Type="Ragdoll"
				PlaneMin="-90"
				TwistMin="-1"
				PlaneMax="90"
				TwistMax="1"
				ConeMin="-100"
				ConeMax="100"
			>
				<TwistMotor Damping="80" Spring="320" Type="Spring" />
				<PlaneMotor Damping="80" Spring="3000000" Type="Spring" />
				<ConeMotor Damping="1" Spring="1" Type="Spring" />
		</Constraint>
		<Camera Center="(-0.0; 0; 0)" ParentFrame="BoneCameraIK"/>
		<Axles>
			<Axle Frame="BoneAxle1" ParentFrame="BoneLogsTail_cdt" />
			<Axle Frame="BoneAxle2" ParentFrame="BoneLogsTail_cdt" />
			<Axle Frame="BoneAxle3" ParentFrame="BoneLogsTail_cdt" />
		</Axles>
	</TruckData>
	<PhysicsModel Mesh="trucks/trailers/semitrailer_foldable_log">
		<NetSync Legacy="false"/>
		<Body CenterOfMassOffset="(0.0; 0; 0)" ImpactType="Truck" Mass="1000" ModelFrame="BoneChassis_cdt">
			<Body Collisions="Default" ImpactType="Truck" Mass="700" ModelFrame="BoneLogsHead_cdt" NetSync="pv" >
				<Constraint
					Name="FrameHead"
					AxisLocal="(0; 0; 1)"
					Type="Hinge"
					MinLimit="-150"
					MaxLimit="30"
				>
					<Motor Force="100000" Type="Position" />
				</Constraint>
				
				<Body CenterOfMassOffset="(0; -0.57; 0)" ImpactType="Truck" Mass="200" ModelFrame="BoneFork1_cdt" NetSync="pv" >
					<Constraint
						Name="Fork1"
						AxisLocal="(0; 0; 1)"
						Type="Hinge"
						MinLimit="0"
						MaxLimit="98"
					>
						<Motor Force="100000" Type="Position" />
					</Constraint>
				</Body>
				<Body CenterOfMassOffset="(0; -0.57; 0)" ImpactType="Truck" Mass="200" ModelFrame="BoneFork2_cdt" NetSync="pv">
					<Constraint
						Name="Fork2"
						AxisLocal="(0; 0; 1)"
						Type="Hinge"
						MinLimit="-82"
						MaxLimit="0"
					>
						<Motor Force="100000" Type="Position" />
					</Constraint>
				</Body>
				
				<Body
					ImpactType="Truck"
					Mass="150"
					ModelFrame="BoneLegR_cdt"
					NoFoliageCollisions="true"
					NetSync="pv" 
				>
					<Constraint
						AxisLocal="(0; 1; 0)"
						Name="LegR"
						Type="Prismatic"
						MinLimit="0.0"
						MaxLimit="0.75"
					>
						<Motor Force="60000" Type="Position" />
					</Constraint>
					<Body
						ImpactType="Truck"
						Mass="20"
						ModelFrame="BoneFootR_cdt"
						NoFoliageCollisions="true"
					>
						<Constraint
							AxisLocal="(0; 0; 1)"
							Type="Hinge"
							MinLimit="-15"
							MaxLimit="15"
						>
							<Motor Damping="0.1" Spring="1" Type="Spring" />
						</Constraint>
					</Body>
				</Body>
				
				<Body
					ImpactType="Truck"
					Mass="150"
					ModelFrame="BoneLegL_cdt"
					NoFoliageCollisions="true"
					NetSync="pv" 
				>
					<Constraint
						AxisLocal="(0; 1; 0)"
						Name="LegL"
						Type="Prismatic"
						MinLimit="0.0"
						MaxLimit="0.75"
					>
						<Motor Force="60000" Type="Position" />
					</Constraint>
					<Body
						ImpactType="Truck"
						Mass="20"
						ModelFrame="BoneFootL_cdt"
						NoFoliageCollisions="true"
					>
						<Constraint
							AxisLocal="(0; 0; 1)"
							Type="Hinge"
							MinLimit="-15"
							MaxLimit="15"
						>
							<Motor Damping="0.1" Spring="1" Type="Spring" />
						</Constraint>
					</Body>
				</Body>
				
				<Body ImpactType="Truck" Mass="1200" ModelFrame="BoneLogsTail_cdt" Collisions="Default" NetSync="pv">
					<Constraint
						Name="FrameTail"
						AxisLocal="(0; 0; 1)"
						Type="Hinge"
						MinLimit="0"
						MaxLimit="170"
					>
						<Motor Force="100000" Type="Position" />
					</Constraint>
					<Body CenterOfMassOffset="(0; -0.57; 0)" ImpactType="Truck" Mass="200" ModelFrame="BoneFork3_cdt" NetSync="pv" >
						<Constraint
							Name="Fork3"
							AxisLocal="(0; 0; 1)"
							Type="Hinge"
							MinLimit="0"
							MaxLimit="95"
						>
							<Motor Force="100000" Type="Position" />
						</Constraint>
					</Body>
					<Body CenterOfMassOffset="(0; -0.57; 0)" ImpactType="Truck" Mass="200" ModelFrame="BoneFork4_cdt" NetSync="pv" >
						<Constraint
							Name="Fork4"
							AxisLocal="(0; 0; 1)"
							Type="Hinge"
							MinLimit="-85"
							MaxLimit="0"
						>
							<Motor Force="100000" Type="Position" />
						</Constraint>
					</Body>
					<Body _template="Mudguard" ModelFrame="BoneHinges_cdt">
						<Constraint AxisLocal="(0; 0; 1)" MinLimit="-44" MaxLimit="5" />
					</Body>
					<Body _template="Mudguard" ModelFrame="BoneMudguardR_cdt">
						<Constraint AxisLocal="(0; 0; 1)" MinLimit="-18" MaxLimit="18" />
					</Body>
					<Body _template="Mudguard" ModelFrame="BoneMudguardL_cdt">
						<Constraint AxisLocal="(0; 0; 1)" MinLimit="-18" MaxLimit="18" />
					</Body>	
				</Body>
			</Body>
		</Body>
	</PhysicsModel>
	
	<ModelAttachments>
		<Ignition>
			<Flare _template="IgnitionSignalRed" Color="g(169; 0; 0) x 0.7" Size="0.5" Pos="(-4.725; 1.508; 1.167)" ParentFrame="BoneLogsTail_cdt" />
			<Flare _template="IgnitionSignalRed" Color="g(169; 0; 0) x 0.7" Size="0.5" Pos="(-4.725; 1.508; 0.962)" ParentFrame="BoneLogsTail_cdt" />
			<Flare _template="IgnitionSignalRed" Color="g(169; 0; 0) x 0.7" Size="0.5" Pos="(-4.725; 1.508; 0.759)" ParentFrame="BoneLogsTail_cdt" />
			<Flare _template="IgnitionSignalRed" Color="g(169; 0; 0) x 0.7" Size="0.5" Pos="(-4.725; 1.508; 0.553)" ParentFrame="BoneLogsTail_cdt" />
			
			<Flare _template="IgnitionSignalRed" Color="g(169; 0; 0) x 0.7" Size="0.5" Pos="(-4.725; 1.508; -1.167)" ParentFrame="BoneLogsTail_cdt" />
			<Flare _template="IgnitionSignalRed" Color="g(169; 0; 0) x 0.7" Size="0.5" Pos="(-4.725; 1.508; -0.962)" ParentFrame="BoneLogsTail_cdt" />
			<Flare _template="IgnitionSignalRed" Color="g(169; 0; 0) x 0.7" Size="0.5" Pos="(-4.725; 1.508; -0.759)" ParentFrame="BoneLogsTail_cdt" />
			<Flare _template="IgnitionSignalRed" Color="g(169; 0; 0) x 0.7" Size="0.5" Pos="(-4.725; 1.508; -0.553)" ParentFrame="BoneLogsTail_cdt" />
		</Ignition>
	</ModelAttachments>
	
	<PoweredConstraints>
		<Group
		ExternalUi="true"
		FoldingDelay="0.2"
		Id="trailer_fold"
		LocaleUid="FOLD/UNFOLD TRAILER"
        TerminalDisableWinchSockets="true"
		>
			<Constraint InitialFix="true" Name="FrameHead" TerminalFix="true" Position="-150" SpeedMultUnfolding="0.8" SpeedMultFolding="0.65" />
			<Constraint InitialFix="true" Name="FrameTail" TerminalFix="true" Position="165" SpeedMultUnfolding="0.45" SpeedMultFolding="0.5" />
			<Constraint InitialFix="true" Name="Fork1" TerminalFix="true" Position="98" SpeedMultUnfolding="0.8" SpeedMultFolding="0.2" />
			<Constraint InitialFix="true" Name="Fork2" TerminalFix="true" Position="-82" SpeedMultUnfolding="0.2" SpeedMultFolding="0.8" />
			<Constraint InitialFix="true" Name="Fork3" TerminalFix="true" Position="95" SpeedMultUnfolding="0.8" SpeedMultFolding="0.18" />
			<Constraint InitialFix="true" Name="Fork4" TerminalFix="true" Position="-85" SpeedMultUnfolding="0.2" SpeedMultFolding="0.82" />
		</Group>
		<Group Id="_trailer_foot">
			<Constraint
				InitialFix="true"
				Name="LegR"
				Tau="0.04"
				TerminalFix="true"
				Position="0.73"
			/>
			<Constraint
				InitialFix="true"
				Name="LegL"
				Tau="0.04"
				TerminalFix="true"
				Position="0.73"
			/>
		</Group>
	</PoweredConstraints>
	<Landmark Mesh="landmarks/semitrailer_foldable_log_lmk" MinScale="1.4" MaxScale="2.2" />
	<GameData
        Price="15000"
        ResetTruckAfterGateway="true"
        LegacyAlignementTruckAfterGateway="false"
    >
		<AddonType Name="FoldableAddon" />
		<UiDesc
			UiDesc="UI_TRAILER_FOLDABLE_LOGS_DESC"
			UiIcon30x30="trailerFoldableLog30"
			UiIcon40x40="trailerFoldableLog40"
			UiName="UI_TRAILER_FOLDABLE_LOGS_NAME"
		/>
		<RequiredAddon Types="saddle_motorized" />
		
		<WinchSocket Pos="(4.256; 1.593; 0.000)" ParentFrame="BoneChassis_cdt" WinchableWhenAttached="false"/>
		<WinchSocket Pos="(-2.906; 1.343; 0.532)" ParentFrame="BoneLogsTail_cdt" />
		<WinchSocket Pos="(-2.906; 1.343; -0.532)" ParentFrame="BoneLogsTail_cdt" />
		<WinchSocket Pos="(-4.703; 1.046; 0.423)" ParentFrame="BoneLogsTail_cdt" />
		<WinchSocket Pos="(-4.703; 1.046; -0.423)" ParentFrame="BoneLogsTail_cdt" />
		<WinchSocket Pos="(-0.056; 1.496; 0.495)" ParentFrame="BoneLogsTail_cdt" />
		<WinchSocket Pos="(-0.056; 1.496; -0.495)" ParentFrame="BoneLogsTail_cdt" />
		<WinchSocket Pos="(3.962; 1.914; -0.528)" ParentFrame="BoneLogsHead_cdt" />
		<WinchSocket Pos="(3.962; 1.914; 0.528)" ParentFrame="BoneLogsHead_cdt" />
		
		<CraneSocket Pos="(4.256; 1.593; 0.000)" ParentFrame="BoneChassis_cdt" />
		<CraneSocket Pos="(-2.906; 1.343; 0.532)" ParentFrame="BoneLogsTail_cdt" />
		<CraneSocket Pos="(-2.906; 1.343; -0.532)" ParentFrame="BoneLogsTail_cdt" />
		<CraneSocket Pos="(-4.703; 1.046; 0.423)" ParentFrame="BoneLogsTail_cdt" />
		<CraneSocket Pos="(-4.703; 1.046; -0.423)" ParentFrame="BoneLogsTail_cdt" />
		<CraneSocket Pos="(-0.056; 1.496; 0.495)" ParentFrame="BoneLogsTail_cdt" />
		<CraneSocket Pos="(-0.056; 1.496; -0.495)" ParentFrame="BoneLogsTail_cdt" />
		<CraneSocket Pos="(3.962; 1.914; -0.528)" ParentFrame="BoneLogsHead_cdt" />
		<CraneSocket Pos="(3.962; 1.914; 0.528)" ParentFrame="BoneLogsHead_cdt" />
		
		<LoadArea Subtype="SemitrailerLogLong" Type="CargoLogsLong" Min="(-6.100; 0.100; -2.200)" Max="(0.000; 6.000; 2.200)" ParentFrame="BoneChassis_cdt" />
		<LoadArea Subtype="SemitrailerLogLong" Type="CargoLogsLong" Min="(0.000; 0.100; -2.200)" Max="(6.400; 6.000; 2.200)" ParentFrame="BoneChassis_cdt" />
		
		<InstallSocket Offset="(4.09; 1.8; -0.000)" Type="SemitrailerFoldableLog" />
		
		<AddonSlots
			InitialOffset="(4.5; 1.9; 0.0)"
			OffsetStep="(0.0; 0.0; 0.0)"
			ParentFrames="BoneChassis_cdt"
			UseTrailerFrame="true"			
			Quantity="1"
			Quantity="1"
		/>
        <CenteringAngularVelocity FrameName="BoneLogsTail_cdt" PoweredGroupName="trailer_fold" Velocity="1.2"/>
	</GameData>
	<AutomaticIK>
		<IKBone ModelFrame="BonePistonHead" ParentFrame="BoneChassis_cdt">
			<IKJoint AxisLocal="(0; 0; 1)" Type="Hinge" />
			<IKBone
				AttachOffset="(0; 0; 0)"
				AttachToFrame="BoneLogsHead_cdt"
				ModelFrame="BonePistonTail"
			>
				<IKJoint AxisLocal="(0; 1; 0)" Type="Slider" />
			</IKBone>
		</IKBone>
		<!-- <IKBone ModelFrame="BoneCameraIK1" ParentFrame="BoneChassis_cdt" > -->
			<!-- <IKJoint AxisLocal="(0; 0; 1)" Type="Hinge" /> -->
			<!-- <IKBone -->
				<!-- AttachOffset="(0; 0; 0)" -->
				<!-- AttachToFrame="BoneChassis_cdt" -->
				<!-- ModelFrame="BoneCameraIK" -->
			<!-- > -->
				<!-- <IKJoint AxisLocal="(0; 0; 1)" Type="Hinge" /> -->
			<!-- </IKBone> -->
		<!-- </IKBone> -->
	</AutomaticIK>
</Truck>

<!-- AttachOffset="(3.14; 0.201; 0)" -->
